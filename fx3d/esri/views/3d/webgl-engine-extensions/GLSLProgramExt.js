/**
 * Copyright @ 2021 Esri.
 * All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions.
 */
define(["esri/core/libs/gl-matrix-2/vec4f64","esri/core/libs/gl-matrix-2/vec3f64","esri/core/libs/gl-matrix-2/vec2f64","esri/core/libs/gl-matrix-2/vec4","esri/core/libs/gl-matrix-2/vec3","esri/core/libs/gl-matrix-2/vec2"],function(t,i,n,r,o,e){var f=i.vec3f64,o=o.vec3,u=n.vec2f64,e=e.vec2,a=t.vec4f64,r=r.vec4,c=0;return function(t,i){var n,l,s,g=c++,h=function(){if(null==n){n=i.createProgram();for(var r=0;r<t.length;++r)i.attachShader(n,t[r].getGLName());m()}},m=function(){null!=n&&(i.linkProgram(n),i.getProgramParameter(n,35714)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+i.getProgramParameter(n,35715)+", gl error ["+i.getError()+"] infoLog: "+i.getProgramInfoLog(n)),l={},s={})};this.init=function(){h()},this.getId=function(){return g},this.getShader=function(i){return t["vertex"===i?0:1]},this.use=function(){h(),i.useProgram(n)},this.getLocation=function(t){return h(),l[t]||(l[t]=i.getUniformLocation(n,t)),l[t]},this.hasUniform=function(t){return null!=this.getLocation(t)},this.getAttribLocation=function(t){return h(),null==s[t]&&(s[t]=i.getAttribLocation(n,t)),s[t]};var v={};this.uniform1i=function(t,n){i.uniform1i(this.getLocation(t,i),n),v[t]=n},this.uniform1f=function(t,n){var r=v[t];null!=r&&n===r||(i.uniform1f(this.getLocation(t,i),n),v[t]=n)};var L={};this.uniform2f=function(t,n,r){var o=L[t];null!=o&&n===o[0]&&r===o[1]||(i.uniform2f(this.getLocation(t,i),n,r),null==o?L[t]=u.fromValues(n,r):e.set(o,n,r))},this.uniform2fv=function(t,n){var r=L[t];(n.length>2||null==r||n[0]!==r[0]||n[1]!==r[1])&&(i.uniform2fv(this.getLocation(t,i),n),null==r?L[t]=u.create(n):e.copy(r,n))};var d={};this.uniform3f=function(t,n,r,e){var u=d[t];null!=u&&n===u[0]&&r===u[1]&&e===u[2]||(i.uniform3f(this.getLocation(t,i),n,r,e),null==u?d[t]=f.fromValues(n,r,e):o.set(u,n,r,e))},this.uniform3fv=function(t,n){var r=d[t];(n.length>3||null==r||n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2])&&(i.uniform3fv(this.getLocation(t,i),n),null==r?d[t]=f.create(n):o.copy(r,n))};var x={};this.uniform4f=function(t,n,o,e,f){var u=x[t];null!=u&&n===u[0]&&o===u[1]&&e===u[2]&&f===u[3]||(i.uniform4f(this.getLocation(t,i),n,o,e,f),null==u?x[t]=a.fromValues(n,o,e,f):r.set(u,n,o,e,f))},this.uniform4fv=function(t,n){var o=x[t];(n.length>4||null==o||n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3])&&(i.uniform4fv(this.getLocation(t,i),n),null==o?x[t]=a.create(n):r.copy(o,n))},this.uniformMatrix4fv=function(t,n){i.uniformMatrix4fv(this.getLocation(t,i),!1,n)},this.dispose=function(){if(null!=n){for(var r=0;r<t.length;++r){var o=t[r].getGLName();i.detachShader(n,o),i.deleteShader(o)}i.deleteProgram(n)}}}});